sudo: required
language: ruby
cache: bundler
dist: trusty

directories:
    - $HOME/buildout-cache

apt:
    sources:
      - google-chrome
    packages:
      - google-chrome-stable

rvm: 2.2

script: bundle exec cucumber

before_install:
         - export CHROME_BIN=/usr/bin/google-chrome
         - export DISPLAY=:99.0
         - sh -e /etc/init.d/xvfb start
         - sudo apt-get update
         - sudo apt-get install -y libappindicator1 fonts-liberation
         - wget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb
         - sudo dpkg -i google-chrome*.deb
         - Selenium::WebDriver::Chrome::Service.executable_path = '/usr/bin/chromedriver'

before_script:
        - bundle install
        - gem install watir
        - gem install colorize
        - gem install rspec
        - gem install cucumber
        - gem install rake
        - export DISPLAY=:99.0
          - sh -e /etc/init.d/xvfb start
          - sleep 3 # give xvfb some time to start
          - rackup  # start a Web server
          - sleep 3 # give Web server some time to bind to sockets, etc

branches:
  only:
    - master

notifications:
  email:
    - iamsmj@gmail.com

